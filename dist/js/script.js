"use strict";$(document).ready(function(){var e,i=$(".form");function c(e){return e.nextElementSibling.textContent=e.validationMessage,e.checkValidity()}$(".submit").on("click",function(e){var n,t,a,o=this;e.preventDefault(),e=i,a=!0,c($("input[name=name]",e).get(0))||(a=!1),c($("input[name=phone]",e).get(0))||(a=!1),(a=!!c($("textarea[name=comment]",e).get(0))&&a)&&(n=[],$("input[name^=address]",i).each(function(){return n.push($(o).val())}),e={name:$("input[name=name]",i).eq(0).val(),phone:$("input[name=phone]",i).eq(0).val(),comment:$("textarea[name=comment]",i).eq(0).val(),to:"mail@mail.ru"},(t=new XMLHttpRequest).responseType="json",t.open("POST","https://webdev-api.loftschool.com/sendmail"),t.setRequestHeader("content-type","application/json"),t.send(JSON.stringify(e)),t.addEventListener("load",function(){var e;e=t.response.status,r.fadeIn(400),s.fadeIn(400,function(){e?$(".modal__text").html("Отправка удалась"):$(".modal__text").html("Произошла ошибка")}),$("body").addClass("lock"),t.response.status&&i[0].reset()}))});ymaps.ready(function(){e=new ymaps.Map("map",{center:[55.752,37.5761],zoom:16,controls:[]});var n=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/content/marker.svg",iconImageSize:[44,54],iconImageOffset:[-22,-54]});[[55.752004,37.576133]].forEach(function(e){n.add(new ymaps.Placemark(e))}),e.geoObjects.add(n),e.behaviors.disable("scrollZoom"),e.behaviors.disable("drag")});var n=$("#mobile-menu-open"),t=$("#mobile-menu-close"),a=$(".mobile-menu"),o=$(".mobile-menu__list"),r=(n.on("click",function(e){e.preventDefault(),a.fadeIn(400)}),t.on("click",function(e){e.preventDefault(),a.fadeOut(400)}),o.children().on("click",function(e){e.preventDefault();e=o.children().index($(this)),e=$(".section")[e+1];a.fadeOut(400,void $(".maincontent").animate({scrollTop:$(e).offset().top},400))}),$(".overlay")),s=$(".modal");$(".overlay, .modal").on("click",function(){r.fadeOut(400,function(){return $("body").removeClass("lock")}),s.fadeOut(400,function(){return $(".modal__text").html("&nbsp;")})});for(var l=$(".fixed-menu__list"),d="fixed-menu__item--active",u=$(".section"),_=document.querySelectorAll(".section"),m=l.children().length;m<_.length;m++){var p=l.children().first().clone();l.append(p)}function v(e){e.removeClass("accordion__descr--active"),$(".accordion__title").removeClass("accordion__title--opened"),e.parent().addClass("accordion__item--closed"),$(".accordion__item--closed").length===$(".accordion__item").length&&$(".accordion__item--closed").removeClass("accordion__item--closed")}var f,h=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(e=u.index($(e.target)),e=e,l.children().removeClass(d),l.children().eq(e).addClass(d))})},{threshold:.5}),g=(_.forEach(function(e){h.observe(e)}),l.children().on("click",function(e){e.preventDefault();e=l.children().index($(this));u[e].scrollIntoView({behavior:"smooth",block:"start"})}),$buttonToOrder=$("a.btn").not(".mobile-menu a").on("click",function(e){e.preventDefault();e=$(".order");$(".maincontent").animate({scrollTop:e.offset().top},400)}),$(".player__video")[0]),b=$(".player__start"),n=(g.addEventListener("canplay",function(e){var n;void 0===f&&(f=g.duration),void 0!==n&&clearInterval(n),setInterval(function(){var e=g.currentTime,e=Math.round(e/f*100),n=g.volume,t=Math.round(100*n);$(".player__playback input").css({"background-size":"".concat(e,"% 100%")}),$(".player__playback input").val(e),$(".volume__scale input").css({"background-size":"".concat(t,"% 100%")}),$(".volume__scale input").val(n)},1e3)}),g.addEventListener("playing",function(){$(".player__splash").hide(),b.addClass("paused"),$(g).on("click",function(){return g.pause()})}),g.addEventListener("pause",function(){b.removeClass("paused"),$(g).on("click",function(){return g.play()})}),b.on("click",function(e){e.preventDefault(),$(e.currentTarget).hasClass("paused")?g.pause():g.play()}),$(".player__splash").on("click",function(e){return g.play()}),$(".player__playback input").on("input",function(e){e.preventDefault(),void 0===f&&(f=g.duration);var e=$(this).val(),n=Math.round(f*e/100);g.currentTime=n,$(".player__playback input").css({"background-size":"".concat(e,"% 100%")})}),$(".volume__scale input").on("input",function(e){e.preventDefault();var e=$(this).val(),n=100*e;g.volume=e,$(".volume__scale input").css({"background-size":"".concat(n,"% 100%")})}),$(".volume__speaker").on("click",function(e){e=$(e.currentTarget);e.hasClass("volume__speaker--active")?(e.removeClass("volume__speaker--active"),g.muted=!0):(e.addClass("volume__speaker--active"),g.muted=!1)}),$(".accordion__name").on("click",function(e){e.preventDefault();var e=$(this).siblings(".accordion__descr");e.hasClass("accordion__descr--active")?v(e):(e=e,v($(".accordion__list .accordion__descr").not(e)),e.addClass("accordion__descr--active"),$(".accordion__title").addClass("accordion__title--opened"),e.parent().removeClass("accordion__item--closed"))}),$(".accordion__title").on("click",function(e){e.preventDefault(),v($(".accordion__list .accordion__descr"))}),$(".accordion__descr").on("click",function(e){e.preventDefault(),v($(".accordion__list .accordion__descr"))}),$("#slider-control-left")),t=$("#slider-control-right"),k=$(".slider__list"),y=k.outerWidth();function C(e){e.removeClass("team__name--active"),e.siblings(".team__content").removeClass("team__content--active"),e.siblings(".team__photo").removeClass("team__photo--active")}t.on("click",function(e){e.preventDefault();var n=k.children().first();n.animate({"margin-left":"-"+y+"px"},400,function(){k.append(n),n.css({"margin-left":0})})}),n.on("click",function(e){e.preventDefault();e=k.children().last();k.prepend(e),e.css({"margin-left":"-"+y+"px"}),e.animate({"margin-left":0},400)}),$(".team__name").on("click",function(e){e.preventDefault();var e=$(this);e.hasClass("team__name--active")?C(e):(e=e,C($(".team__item .team__name").not(e)),e.addClass("team__name--active"),e.siblings(".team__content").addClass("team__content--active"),e.siblings(".team__photo").addClass("team__photo--active"))});var D=$(".reviews__switcher"),x=$(".reviews__display"),w="interactive-avatar--active",I="reviews__display-inner--active";D.find("a").on("click",function(e){e.preventDefault();var e=$(this).parent();e.hasClass(w)||(e=(e=e).index(),D.children().removeClass(w),x.children().removeClass(I),D.children().eq(e).addClass(w),x.children().eq(e).addClass(I))})});