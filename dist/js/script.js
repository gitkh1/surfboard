"use strict";$(document).ready(function(){var o=$(".form");function i(e){return e.nextElementSibling.textContent=e.validationMessage,e.checkValidity()}$(".submit").on("click",function(e){var a,t,n,c=this;e.preventDefault(),e=o,n=!0,i($("input[name=name]",e).get(0))||(n=!1),i($("input[name=phone]",e).get(0))||(n=!1),(n=!!i($("textarea[name=comment]",e).get(0))&&n)&&(a=[],$("input[name^=address]",o).each(function(){return a.push($(c).val())}),e={name:$("input[name=name]",o).eq(0).val(),phone:$("input[name=phone]",o).eq(0).val(),comment:$("textarea[name=comment]",o).eq(0).val(),to:"mail@mail.ru"},(t=new XMLHttpRequest).responseType="json",t.open("POST","https://webdev-api.loftschool.com/sendmail"),t.setRequestHeader("content-type","application/json"),t.send(JSON.stringify(e)),t.addEventListener("load",function(){openModal(t.response.status),t.response.status&&o[0].reset()}))})});var myMap,init=function(){myMap=new ymaps.Map("map",{center:[55.752,37.5761],zoom:16,controls:[]});var a=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/content/marker.svg",iconImageSize:[44,54],iconImageOffset:[-22,-54]});[[55.752004,37.576133]].forEach(function(e){a.add(new ymaps.Placemark(e))}),myMap.geoObjects.add(a),myMap.behaviors.disable("scrollZoom"),myMap.behaviors.disable("drag")};ymaps.ready(init),$(document).ready(function(){var e=$("#mobile-menu-open"),a=$("#mobile-menu-close"),t=$(".mobile-menu");e.on("click",function(e){e.preventDefault(),t.addClass("is-active")}),a.on("click",function(e){e.preventDefault(),t.removeClass("is-active")})}),$(document).ready(function(){var e=$(".overlay"),a=$(".modal");$(".overlay, .modal").on("click",function(){e.fadeOut(300,function(){return $("body").removeClass("lock")}),a.fadeOut(300,function(){return $(".modal__text").html("&nbsp;")})})}),$(document).ready(function(){for(var a=$(".fixed-menu__list"),t="fixed-menu__item--active",n=$(".section"),e=document.querySelectorAll(".section"),c=a.children().length;c<e.length;c++){var o=a.children().first().clone();a.append(o)}var i=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(e=n.index($(e.target)),e=e,a.children().removeClass(t),a.children().eq(e).addClass(t))})},{threshold:.5});e.forEach(function(e){i.observe(e)}),a.children().on("click",function(e){e.preventDefault();e=a.children().index($(this));n[e].scrollIntoView({behavior:"smooth",block:"start"})})}),$(document).ready(function(){var o=$(".player__video")[0];o.oncanplay=function(){var e,c=o.duration,a=(void 0!==e&&clearInterval(e),e=setInterval(function(){var e=o.currentTime/c*100,a=100-e,t=100*o.volume,n=100-t;$(".player__playback-button").css({left:"".concat(e,"%")}),$(".player__playback-before").css({width:"".concat(e,"%")}),$(".player__playback-after").css({width:"".concat(a,"%")}),$(".volume__scale-button").css({left:"".concat(t,"%")}),$(".volume__scale-before").css({width:"".concat(t,"%")}),$(".volume__scale-after").css({width:"".concat(n,"%")})},1e3),$(".player__start"));a.on("click",function(e){e.preventDefault(),$(e.currentTarget).hasClass("paused")?o.pause():o.play()}),$(".player__playback").on("click",function(e){var a=$(e.currentTarget),e=(e.pageX-a.offset().left)/a.width()*100,a=100-e,t=Math.round(c*e/100);o.currentTime=t,$(".player__playback-button").css({left:"".concat(e,"%")}),$(".player__playback-before").css({width:"".concat(e,"%")}),$(".player__playback-after").css({width:"".concat(a,"%")})}),$(".volume__scale").on("click",function(e){var a=$(e.currentTarget),e=(e.pageX-a.offset().left)/a.width()*100,a=100-e,t=Math.round(e)/100;o.volume=t,$(".volume__scale-button").css({left:"".concat(e,"%")}),$(".volume__scale-before").css({width:"".concat(e,"%")}),$(".volume__scale-after").css({width:"".concat(a,"%")})}),$(".volume__speaker").on("click",function(e){e.preventDefault();e=$(e.currentTarget);e.hasClass("volume__speaker--active")?(e.removeClass("volume__speaker--active"),o.muted=!0):(e.addClass("volume__speaker--active"),o.muted=!1)}),$(".player__splash").on("click",function(e){return o.play()}),o.addEventListener("playing",function(){$(".player__wrapper").addClass("active"),a.addClass("paused")}),o.addEventListener("pause",function(){return a.removeClass("paused")})}}),$(document).ready(function(){function a(e){e.removeClass("accordion__descr--active"),$(".accordion__title").removeClass("accordion__title--opened"),e.parent().addClass("accordion__item--closed"),$(".accordion__item--closed").length===$(".accordion__item").length&&$(".accordion__item--closed").removeClass("accordion__item--closed")}$(".accordion__name").on("click",function(e){e.preventDefault();var e=$(this).siblings(".accordion__descr");e.hasClass("accordion__descr--active")?a(e):(e=e,a($(".accordion__list .accordion__descr").not(e)),e.addClass("accordion__descr--active"),$(".accordion__title").addClass("accordion__title--opened"),e.parent().removeClass("accordion__item--closed"))}),$(".accordion__title").on("click",function(e){e.preventDefault(),a($(".accordion__list .accordion__descr"))}),$(".accordion__descr").on("click",function(e){e.preventDefault(),a($(".accordion__list .accordion__descr"))})}),$(document).ready(function(){var e=$("#slider-control-left"),a=$("#slider-control-right"),t=$(".slider__list"),n=t.outerWidth();a.on("click",function(e){e.preventDefault();var a=t.children().first();a.animate({"margin-left":"-"+n+"px"},300,function(){t.append(a),a.css({"margin-left":0})})}),e.on("click",function(e){e.preventDefault();e=t.children().last();t.prepend(e),e.css({"margin-left":"-"+n+"px"}),e.animate({"margin-left":0},300)})}),$(document).ready(function(){function a(e){e.removeClass("team__name--active"),e.siblings(".team__content").removeClass("team__content--active"),e.siblings(".team__photo").removeClass("team__photo--active")}$(".team__name").on("click",function(e){e.preventDefault();var e=$(this);e.hasClass("team__name--active")?a(e):(e=e,a($(".team__item .team__name").not(e)),e.addClass("team__name--active"),e.siblings(".team__content").addClass("team__content--active"),e.siblings(".team__photo").addClass("team__photo--active"))})}),$(document).ready(function(){var a=$(".reviews__switcher"),t=$(".reviews__display"),n="interactive-avatar--active",c="reviews__display-inner--active";a.find("a").on("click",function(e){e.preventDefault();var e=$(this).parent();e.hasClass(n)||(e=(e=e).index(),a.children().removeClass(n),t.children().removeClass(c),a.children().eq(e).addClass(n),t.children().eq(e).addClass(c))})});