"use strict";$(document).ready(function(){var c=$(".form");function i(e){return e.nextElementSibling.textContent=e.validationMessage,e.checkValidity()}$(".submit").on("click",function(e){var n,t,a,o=this;e.preventDefault(),e=c,a=!0,i($("input[name=name]",e).get(0))||(a=!1),i($("input[name=phone]",e).get(0))||(a=!1),(a=!!i($("textarea[name=comment]",e).get(0))&&a)&&(n=[],$("input[name^=address]",c).each(function(){return n.push($(o).val())}),e={name:$("input[name=name]",c).eq(0).val(),phone:$("input[name=phone]",c).eq(0).val(),comment:$("textarea[name=comment]",c).eq(0).val(),to:"mail@mail.ru"},(t=new XMLHttpRequest).responseType="json",t.open("POST","https://webdev-api.loftschool.com/sendmail"),t.setRequestHeader("content-type","application/json"),t.send(JSON.stringify(e)),t.addEventListener("load",function(){openModal(t.response.status),t.response.status&&c[0].reset()}))})});var myMap,init=function(){myMap=new ymaps.Map("map",{center:[55.752,37.5761],zoom:16,controls:[]});var n=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/content/marker.svg",iconImageSize:[44,54],iconImageOffset:[-22,-54]});[[55.752004,37.576133]].forEach(function(e){n.add(new ymaps.Placemark(e))}),myMap.geoObjects.add(n),myMap.behaviors.disable("scrollZoom"),myMap.behaviors.disable("drag")},$overlay=(ymaps.ready(init),$(document).ready(function(){var e=$("#mobile-menu-open"),n=$("#mobile-menu-close"),t=$(".mobile-menu"),a=$(".mobile-menu__list");e.on("click",function(e){e.preventDefault(),t.fadeIn(400)}),n.on("click",function(e){e.preventDefault(),t.fadeOut(400)}),a.children().on("click",function(e){e.preventDefault();e=a.children().index($(this)),e=$(".section")[e+1];t.fadeOut(400,void $(".maincontent").animate({scrollTop:$(e).offset().top},400))})}),$(".overlay")),$modal=$(".modal");function openModal(e){$overlay.fadeIn(400),$modal.fadeIn(400,function(){e?$(".modal__text").html("Отправка удалась"):$(".modal__text").html("Произошла ошибка")}),$("body").addClass("lock")}function closeModal(){$overlay.fadeOut(400,function(){return $("body").removeClass("lock")}),$modal.fadeOut(400,function(){return $(".modal__text").html("&nbsp;")})}$(".overlay, .modal").on("click",closeModal),$(document).ready(function(){for(var n=$(".fixed-menu__list"),t="fixed-menu__item--active",a=$(".section"),e=document.querySelectorAll(".section"),o=n.children().length;o<e.length;o++){var c=n.children().first().clone();n.append(c)}var i=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&(e=a.index($(e.target)),e=e,n.children().removeClass(t),n.children().eq(e).addClass(t))})},{threshold:.5});e.forEach(function(e){i.observe(e)}),n.children().on("click",function(e){e.preventDefault();e=n.children().index($(this));a[e].scrollIntoView({behavior:"smooth",block:"start"})})}),$(document).ready(function(){$buttonToOrder=$("a.btn").not(".mobile-menu a").on("click",function(e){e.preventDefault();e=$(".order");$(".maincontent").animate({scrollTop:e.offset().top},400)})}),$(document).ready(function(){var a,o=$(".player__video")[0],e=$(".player__start");o.addEventListener("canplay",function(e){var n;void 0===a&&(a=o.duration),void 0!==n&&clearInterval(n),setInterval(function(){var e=o.currentTime,e=Math.round(e/a*100),n=o.volume,t=Math.round(100*n);$(".player__playback input").css({"background-size":"".concat(e,"% 100%")}),$(".player__playback input").val(e),$(".volume__scale input").css({"background-size":"".concat(t,"% 100%")}),$(".volume__scale input").val(n)},1e3)}),o.addEventListener("playing",function(){$(".player__splash").hide(),e.addClass("paused"),$(o).on("click",function(){return o.pause()})}),o.addEventListener("pause",function(){e.removeClass("paused"),$(o).on("click",function(){return o.play()})}),e.on("click",function(e){e.preventDefault(),$(e.currentTarget).hasClass("paused")?o.pause():o.play()}),$(".player__splash").on("click",function(e){return o.play()}),$(".player__playback input").on("input",function(e){e.preventDefault(),void 0===a&&(a=o.duration);var e=$(this).val(),n=Math.round(a*e/100);o.currentTime=n,$(".player__playback input").css({"background-size":"".concat(e,"% 100%")})}),$(".volume__scale input").on("input",function(e){e.preventDefault();var e=$(this).val(),n=100*e;o.volume=e,$(".volume__scale input").css({"background-size":"".concat(n,"% 100%")})}),$(".volume__speaker").on("click",function(e){e=$(e.currentTarget);e.hasClass("volume__speaker--active")?(e.removeClass("volume__speaker--active"),o.muted=!0):(e.addClass("volume__speaker--active"),o.muted=!1)})}),$(document).ready(function(){function n(e){e.removeClass("accordion__descr--active"),$(".accordion__title").removeClass("accordion__title--opened"),e.parent().addClass("accordion__item--closed"),$(".accordion__item--closed").length===$(".accordion__item").length&&$(".accordion__item--closed").removeClass("accordion__item--closed")}$(".accordion__name").on("click",function(e){e.preventDefault();var e=$(this).siblings(".accordion__descr");e.hasClass("accordion__descr--active")?n(e):(e=e,n($(".accordion__list .accordion__descr").not(e)),e.addClass("accordion__descr--active"),$(".accordion__title").addClass("accordion__title--opened"),e.parent().removeClass("accordion__item--closed"))}),$(".accordion__title").on("click",function(e){e.preventDefault(),n($(".accordion__list .accordion__descr"))}),$(".accordion__descr").on("click",function(e){e.preventDefault(),n($(".accordion__list .accordion__descr"))})}),$(document).ready(function(){var e=$("#slider-control-left"),n=$("#slider-control-right"),t=$(".slider__list"),a=t.outerWidth();n.on("click",function(e){e.preventDefault();var n=t.children().first();n.animate({"margin-left":"-"+a+"px"},400,function(){t.append(n),n.css({"margin-left":0})})}),e.on("click",function(e){e.preventDefault();e=t.children().last();t.prepend(e),e.css({"margin-left":"-"+a+"px"}),e.animate({"margin-left":0},400)})}),$(document).ready(function(){function n(e){e.removeClass("team__name--active"),e.siblings(".team__content").removeClass("team__content--active"),e.siblings(".team__photo").removeClass("team__photo--active")}$(".team__name").on("click",function(e){e.preventDefault();var e=$(this);e.hasClass("team__name--active")?n(e):(e=e,n($(".team__item .team__name").not(e)),e.addClass("team__name--active"),e.siblings(".team__content").addClass("team__content--active"),e.siblings(".team__photo").addClass("team__photo--active"))})}),$(document).ready(function(){var n=$(".reviews__switcher"),t=$(".reviews__display"),a="interactive-avatar--active",o="reviews__display-inner--active";n.find("a").on("click",function(e){e.preventDefault();var e=$(this).parent();e.hasClass(a)||(e=(e=e).index(),n.children().removeClass(a),t.children().removeClass(o),n.children().eq(e).addClass(a),t.children().eq(e).addClass(o))})});